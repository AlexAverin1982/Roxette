сортируем типы объектов по количеству ссылок на другие типы

просматриваем объекты по отсортированному списку типов:
 - переупорядочиваем тэги в объектах и их группах в соответствии с целевым шаблоном 
 - обрабатываем объекты и группы по схеме:
	-- проходим по списку тэгов-ссылок другие объекты:
	
	-- проходим по списку тэгов, значения которых нужно установить пустыми
	-- проходим по списку тэгов, которые нужно удалить
	-- проходим по списку тэгов, которые нужно вставить в указанную позицию с указанным значением
	-- проходим по списку тэгов, значение которого нужно установить
	-- проходим по списку подобъектов
	
обработанные таким образом группы и объекты добавляем в результирующее дерево	
	
	