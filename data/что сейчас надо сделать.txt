 научиться удалять атрибуты в подобъектах, не заходя в них, иначе удаление при рекурсии не происходит
 
 
определить циклические ссылки (физ лицо - основной банковский счет - владелец счета - физ лицо)
сформировать инструкции по обработке таких циклов:
 - указать первичный тип (физ лицо) 
 - первичное значение ссылки (основной банковский счет = empty_guid)
 - после записи объекта "банковский счет" по ссылке "владелец" проверить в объекте, 
 где ref=ссылка владелец, если "основной банковский счет" пуст -> записать значение идентификатора счета
 
продумать оптимизацию алгоритма сохранения старых непустых значений